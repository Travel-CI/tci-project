<div class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-header">
        <i class="fa fa-align-justify"></i> Projects List
      </div>
      <div class="card-block">
        <div class="ui-widget-header" style="padding:4px 10px;border-bottom: 0 none">
          <i class="fa fa-search" style="margin:4px 4px 0 0"></i>
          <input #filter type="text" pInputText size="20" placeholder="Filtre">
        </div>

        <p-dataTable [value]="projects"
                     [globalFilter]="filter"
                     [responsive]="true"
                     [loading]="loading"
                     sortField="id"
                     sortOrder="1"
                     scrollable="true"
                     scrollHeight="500px">

          <p-column field="id" header="Status" [sortable]="true" [style]="{'width': '80px'}"></p-column>
          <p-column field="name" header="Project Name" [sortable]="true"></p-column>

          <p-column  header="Last Start">
            <ng-template let-project="rowData" pTemplate="body">
              {{ project.lastStart | date:'medium' }}
            </ng-template>
          </p-column>

          <p-column header="Actions" [style]="{'width': '145px'}">
            <ng-template let-col let-project="rowData" pTemplate="body">
              <button class="btn btn-secondary btn-sm" type="button" (click)="redirectToBuildsPage(project)"><i class="fa fa-info-circle"></i></button>
              <button class="btn btn-success btn-sm" type="button" *ngIf="project.enable" (click)="showStartDialog(project)"><i class="fa fa-play"></i></button>
              <button class="btn btn-primary btn-sm" type="button" (click)="redirectToEditPage(project)"><i class="fa fa-pencil"></i></button>
              <button class="btn btn-danger btn-sm" type="button" (click)="showDeleteProjectDialog(project)"><i class="fa fa-trash"></i></button>
            </ng-template>
          </p-column>
        </p-dataTable>
      </div>
    </div>
  </div>
</div>


<p-dialog appendTo="body" header="Select Branch" [(visible)]="dialogBranchesVisible" modal="modal" width="300" [draggable]=false (onHide)="hideStartDialog()">

  <div class="form-group row">
    <label class="col-md-3 form-control-label">Branch</label>
    <div class="col-md-9">
      <p-dropdown placeholder="Choose a Branch" [style]="{'width':'100%'}" [options]="dialogBranches" [(ngModel)]="selectedBranch"></p-dropdown>
    </div>
  </div>
  <div class="col-xs-12" style="height:50px;"></div>
  <p-footer>
    <button type="button" class="btn btn-success" (click)="startManualBuild()" [disabled]="!selectedBranch"><i class="fa fa-cogs"></i> Start Build</button>
    <button type="button" class="btn btn-danger" (click)="hideStartDialog()"><i class="fa fa-ban"></i> Cancel</button>
  </p-footer>
</p-dialog>

<p-dialog appendTo="body" header="Delete Project" [(visible)]="dialogDeleteProjectVisible" modal="modal" width="300" [draggable]=false (onHide)="hideDeleteProjectDialog()">

  Are you sure to delete project "{{ confirmDeleteProject.name }}" ?
  <div class="col-xs-12" style="height:50px;"></div>
  <p-footer>
    <button type="button" class="btn btn-success" (click)="deleteProject()"><i class="fa fa-cogs"></i> Yes</button>
    <button type="button" class="btn btn-danger" (click)="hideDeleteProjectDialog()"><i class="fa fa-ban"></i> No</button>
  </p-footer>
</p-dialog>


<toaster-container [toasterconfig]="toasterConfig"></toaster-container>
